---
import ListLayout from "../../layouts/ListLayout.astro";
import { getCollection } from "astro:content";
import PostList from "../../components/ui/PostList.astro";

const { category } = Astro.params;
if (category === undefined) {
  throw new Error("Slug is required");
}

const posts = await getCollection("posts", ({ data }) => data.categories?.includes(category));

if (posts === undefined) {
  return Astro.redirect("/404");
}

---


<ListLayout>
    <PostList posts={posts}/>
</ListLayout>
